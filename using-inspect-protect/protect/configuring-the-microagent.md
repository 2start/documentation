# Configuring the ShiftLeft Protect Microagent

The ShiftLeft Protect Microagent is run with an application that has been analyzed by ShiftLeft Inspect. The Microagent is a lightweight agent that runs in-memory with an application (in production or other environments such as staging, test, UAT) you want to monitor and protect. 

The Microagent runs out-of-the-box with default settings. Optionally you can configure the Microagent for your specific environment.

These setting are different for Java or .NET Framework applications. Information on configuring the Microagent for Java is provided here. [Contact us](https://www.shiftleft.io/contact/) if you want to configure the Microagent for .NET Framework.

## Defaults Settings for Java

The Microagent is configured with default settings that support core operations. These defaults support various configuration mechanisms, including values in the `shiftleft.json` file, Java properties and environment variables. 

## Configuration Options for Java

Java properties override values in the `shiftleft.json` file; environment variables override the values of both the `shiftleft.json` file and Java properties.

### `shiftleft.json` File

The `shiftleft.json` file is generated by ShiftLeft Inspect as part of the process of analyzing your application. This file is than used by ShiftLeft Protect to customize the monitoring and securing of the application. The `shiftleft.json` file is located in the working directory with the application binary.

You can configure the Microagent by modifying the `shiftleft.json` file. Note that the syntax must conform to the ShiftLeft format.

For example, to configure the proxy and log level using the `shiftleft.json` file

```json
{
  "accessToken": "eyJhbGciOiJSUzUxMiIsInR5cCI6IkpXVCJ9.eyJl...",
  "sprId": "sl/0adb2179-40f6-443e-b346-e7b54e5efbfb/cli-hello-shiftleft-0.0.1.jar/.%2Fhello-shiftleft-0.0.1.jar/v/baseline",
  "slProxy": {
    "host": "10.8.8.10",
    "port": 443,
    "certificate": "*"
    },
  "log": {
    "level": "TRACE",
    "maxFiles": 5,
    "maxFileBytes": 10000000
  }
}
```

Refer to the the [`shiftleft.json` File](protect-java/json-file.md) article for more information.

### Java Properties

Configure the Microagent using Java system properties specified as arguments to the JVM command. The syntax is

`-D${prop-name}=${prop-value}`

For example, to set the debug level for logging using Java properties,

```
java -javaagent:sl-microagent-x.y.z.jar -Dshiftleft.log.level=DEBUG -jar /hello-shiftleft-x.y.z.jar
```

### Environment Variables

Configure the Microagent using process environment variables passed to the JVM by its parent process. The syntax is

`SHIFTLEFT_PROP_NAME="prop-value"`

For example, you can use the `SHIFTLEFT_CONFIG` environment variable to pass to ShiftLeft Protect the path of the [`shiftleft.json` file](securing-applications.md)

`$ SHIFTLEFT_CONFIG=/home/myhome/shiftLeftFiles/shiftleft.json sl run -- <....>`

Another example is passing process environment variables to the JVM by setting in bash as 

```bash
export SHIFTLEFT_LOG_LEVEL=DEBUG 
```
